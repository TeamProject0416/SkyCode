<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <link th:href="@{/css/reset.css}" rel="stylesheet">
  <link th:href="@{/css/typo.css}" rel="stylesheet">
  <link th:href="@{/css/login/loginForm.css}" rel="stylesheet">
  <link th:href="@{/css/sub/header.css}" rel="stylesheet">
  <link th:href="@{/css/sub/footer.css}" rel="stylesheet">

  <th:block layout:fragment="css">
    <style>
      .fieldError {
        color: #bd2130;
      }
    </style>
  </th:block>

</head>
<body>

  <header th:replace="~{fragments/sub/header::header}"></header>

  <section class="oej_container">
    <!--action속성 form에 작성한 데이터를 어디로 보낼지 지정-->
    <form th:action="@{/member/save}" method="post" th:object="${memberDTO}">
      <div class="oej">
        <div class="header_oej">회원가입</div>

        <div class="oej_name">
          <label th:for="memberName">이름</label>
          <input class="oej_n" id="memberName" type="text" th:field="*{memberName}" name="memberName" placeholder="예) 홍길동">
          <p th:if="${#fields.hasErrors('memberName')}" th:errors="*{memberName}" class="fieldError">Incorrect data</p>
        </div>

        <div class="oej_id">
          <label th:for="memberId">아이디</label>
          <input class="oej_text" type="text" th:field="*{memberId}" name="memberId" id="memberId" onkeyup="emailCheck()"  placeholder="예) skycode">
          <p id="check-result"></p>
          <p th:if="${#fields.hasErrors('memberId')}" th:errors="*{memberId}" class="fieldError">Incorrect data</p>
        </div>

        <div class="oej_pw">
          <label th:for="memberPassword">비밀번호</label>
          <input class="oej_pass" type="password" th:field="*{memberPassword}" name="memberPassword"  placeholder="비밀번호는 8자 이상, 16자 이하로 입력해주세요">
          <p th:if="${#fields.hasErrors('memberPassword')}" th:errors="*{memberPassword}" class="fieldError">Incorrect data
          </p>
        </div>

        <div class="oej_pwcheck">
          <label th:for="memberPasswordCheck">*비밀번호확인</label>
          <input class="oej_pwchecked" type="password" th:field="*{memberPasswordCheck}" name="memberPasswordCheck" placeholder="비밀번호를 다시 입력해 주세요">
          <p th:if="${#fields.hasErrors('memberPasswordCheck')}" th:errors="*{memberPasswordCheck}" class="fieldError">Incorrect data
          </p>
        </div>

        <div class="oej_number">
          <label th:for="memberPhone" class="oej_ber">전화번호</label>
          <div class="oej_phonenumber">
            <select class="oej_num">
              <option value="">대한민국 +82</option>
            </select>
            <input class="oej_phone" type="tel" th:field="*{memberPhone}" name="memberPhone" placeholder="예) 010-1234-5678">
          </div>
          <p th:if="${#fields.hasErrors('memberPhone')}" th:errors="*{memberPhone}" class="fieldError">Incorrect data</p>
        </div>

        <div class="oej_birthday">
          <label th:for="memberBirthday"> 생년월일</label>
          <input class="oej_y" name="memberBirthday" th:field="*{memberBirthday}" type="date" value="xxx" min="yyy" max="zzz">
          <p th:if="${#fields.hasErrors('memberBirthday')}" th:errors="*{memberBirthday}" class="fieldError">Incorrect data
          </p>
        </div>

        <!-- 이메일 -->
        <div class="oej_emailid">

          <label th:for="memberEmail" class="oej_em">이메일</label>
          <input class="oej_mail" th:field="*{memberEmail}" type="tel" placeholder="" />
          <!-- <input class="oej_mail2" type="tel" placeholder="" maxlength="18"> -->
<!--          <select class="oej_select" title="이메일 도메인 주소 선택" onclick="setEmailDomain(this.value);return false;">-->
<!--            <option value="">-선택-</option>-->
<!--            <option value="">-직접입력하기-</option>-->
<!--            <option value="naver.com">naver.com</option>-->
<!--            <option value="google.com">google.com</option>-->
<!--            <option value="hanmail.net">hanmail.net</option>-->
<!--            <option value="nate.com">nate.com</option>-->
<!--            <option value="kakao.com">kakao.com</option>-->
<!--            <option value="kakao.com">gmail.com</option>-->
<!--          </select>-->
          <p th:if="${#fields.hasErrors('memberEmail')}" th:errors="*{memberEmail}" class="fieldError">Incorrect data</p>
        </div>


        <div class="oej_address">
          <label th:for="memberAddress">주소</label>
          <input class="oej_add" type="text" th:field="*{memberAddress}" name="memberAddress" placeholder="상세한 주소를 입력해 주세요">
          <p th:if="${#fields.hasErrors('memberAddress')}" th:errors="*{memberAddress}" class="fieldError">Incorrect data</p>
        </div>

<!--        &lt;!&ndash; 회원 가입 버튼 &ndash;&gt;-->
<!--        &lt;!&ndash; 로그인 &ndash;&gt;-->
<!--&lt;!&ndash;        <button type="submit" class="oej_join" onClick="location.href='main'">JOIN US</button>&ndash;&gt;-->
        <button id="submit" class="oej_join" onclick="checkfield()">JOIN US</button>
<!--                  <button id="submit"  class="oej_join" value="LOGIN">-->

      </div>
    </form>
  </section>


<footer th:replace="~{fragments/sub/footer::footer}"></footer>

<script src="https:cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
<script th:inline="javascript">

  <script type="text/javascript">

    function checkfield(){

    if(document.addjoin.id.value==""){ //id값이 없을 경우
    alert("아이디를 입력하세요");         //메세지 경고창을 띄운 후
    document.addjoin.id.focus();     // id 텍스트박스에 커서를 위치
    exit;

  }else if(document.addjoin.pw.value==""){
    alert("비밀번호를 입력하세요");
    document.addjoin.pw.focus();
    exit;

  }else if(document.addjoin.pw2.value==""){
    alert("비밀번호확인을 입력하세요");
    document.addjoin.pw2.focus();
    exit;

  }else if(document.addjoin.name.value==""){
    alert("이름을 입력하세요");
    document.addjoin.name.focus();
    exit;

  }else if(document.addjoin.nick.value==""){
    alert("닉네임을 입력하세요");
    document.addjoin.nick.focus();
    exit;

  }else if(document.addjoin.addr.value==""){
    alert("주소를 입력하세요");
    document.addjoin.addr.focus();
    exit;

  }else if(document.addjoin.email.value==""){
    alert("이메일을 입력하세요");
    document.addjoin.email.focus();
    exit;

  }


    if(document.addjoin.pw.value!=document.addjoin.pw2.value){
    //비밀번호와 비밀번호확인의 값이 다를 경우

    alert("입력한 2개의 비밀번호가 일치하지 않습니다.");
    document.addjoin.pw.focus();
    exit;

  }


    var exptext = /^[A-Za-z0-9_\.\-]+@[A-Za-z0-9\-]+\.[A-Za-z0-9\-]+/;

    if(exptext.test(document.addjoin.email.value)==false){
    //이메일 형식이 알파벳+숫자@알파벳+숫자.알파벳+숫자 형식이 아닐경우

    alert("이 메일형식이 올바르지 않습니다.");
    document.addjoin.email.focus();
    exit;
  }

    document.addjoin.submit();

  }


    </script>
<script src="/js/sub/header.js"></script>
<script src="/js/sub/footer.js"></script>
</body>

</html>